services:
  # ===== Backend (FastAPI + Docker) =====
  - type: web
    name: auctionhub-backend
    runtime: docker
    plan: free
    branch: main

    # Docker build paths (relative to repo root)
    dockerfilePath: backend/Dockerfile
    dockerContext: backend

    # Health check endpoint
    healthCheckPath: /

    envVars:
      # ⚠️ ตั้งค่าใน Render Dashboard หลัง deploy
      - key: SUPABASE_URL
        sync: false
      - key: SUPABASE_KEY
        sync: false
      - key: FRONTEND_URL
        sync: false

  # ===== Frontend (React + Vite + Docker) =====
  - type: web
    name: auctionhub-frontend
    runtime: docker
    plan: free
    branch: main

    dockerfilePath: frontend/Dockerfile
    dockerContext: frontend

    envVars:
      # ⚠️ ตั้งค่าใน Render Dashboard หลัง backend deploy เสร็จ
      - key: VITE_API_BASE_URL
        sync: false
      - key: VITE_SUPABASE_URL
        sync: false
      - key: VITE_SUPABASE_ANON_KEY
        sync: false